---
title: 滝行記録アップデート情報（2021年6月）
published: 2021-06-09
---

# What

滝行記録のアップデート情報です。

# react-markdownを6.0にアップデート

滝行記録のmarkdown記事ファイルをreactコンポーネントとしてレンダリングするreact-markdownが6.0にメジャーバージョンアップし、後述のプラグイン設定方法も変更されたので、まずはバージョン6に追随する更新を行いました。

現在コードハイライトに使用しているreact-syntax-highlighterをreact-markdownに組み込む部分の記述方法が変更されたので、[ここ](https://github.com/remarkjs/react-markdown#use-custom-components-syntax-highlight)を参考（というかほぼそのまま）に修正します。

~~~typescript
// バージョンアップ前
import ReactMarkdown from "react-markdown"
import { Prism as SyntaxHighlighter } from 'react-syntax-highlighter'
import { vscDarkPlus } from "react-syntax-highlighter/dist/cjs/styles/prism"

// （略）

const renderers = {
  code: ({language, value}) => {
    return <SyntaxHighlighter style={vscDarkPlus} language={language} children={value} />
  }
}

// （略）

<ReactMarkdown className="post-body" renderers={renderers}>
  {params.content}
</ReactMarkdown>
~~~

~~~typescript
// バージョンアップ後
import ReactMarkdown from "react-markdown"
import { Prism as SyntaxHighlighter } from 'react-syntax-highlighter'
import { vscDarkPlus } from "react-syntax-highlighter/dist/cjs/styles/prism"

// （略）

const components = {
  code({node, inline, className, children, ...props}) {
    const match = /language-(\w+)/.exec(className || '')
    return !inline && match ? (
        <SyntaxHighlighter style={vscDarkPlus} language={match[1]} PreTag="div" children={String(children).replace(/\n$/, '')} {...props} />
    ) : (
        <code className={className} {...props} />
    )
  }
}

// （略）

<ReactMarkdown
  components={components}
  className="post-body"
>
  {params.content}
</ReactMarkdown>
~~~

修正後に問題なくコードハイライトされていることを確認し、完了です。